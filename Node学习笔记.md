### 原理
基于 Google V8 引擎的 JavaScript 运行时环境，同时结合 Libuv 扩展了 JavaScript 功能，使之支持 io、fs 等只有语言才有的特性，使得 JavaScript 能够同时具有 DOM 操作(浏览器)和 I/O、文件读写、操作数据库(服务器端)等能力，是目前最简单的全栈式语言。
- JavaScript为单线程，通过node构建机制，通过异步来解决并发问题

### 用途
后端开发、前端库开发（vue、react、webpack）

### 优点
Node.js通常被用来开发低延迟的网络应用，也就是那些需要在服务器端环境和前端实时收集和交换数据的应用（API、即时聊天、微服务）。

### 缺点
    - 回调太多难于控制（俗称回调地狱）------Callback、Promise 到 Async函数
    - CPU 密集任务处理的不是很好。
    
### 架构
Node.js 是基于 Chrome V8引擎构建的，采用 C/C++ 编写，由事件循环（Event Loop）分发 I/O 任务，最终工作线程（Work Thread）将任务丢到线程池（Thread Pool）里去执行，而事件循环只要等待执行结果就可以了。
![image](https://github.com/destinyoung/Node/blob/main/img/12451299-5ab469048a470_fix732.png)
![image](https://github.com/destinyoung/Node/blob/main/img/2346487390-5ab46904a01be_fix732.png)

在Node.js Bindings层做的事儿就是将 Chrome V8 等暴露的 C/C++ 接口转成JavaScript Api，并且结合这些 Api 编写了 Node.js 标准库，所有这些 Api 统称为 Node.js SDK


___



### 如何学习
![image](https://github.com/destinyoung/Work_Notes/blob/main/img/154088-20180606073358331-1975300113.png)
- 问题一：https、http、net 模块长得好像，API也差不多，它们之间是什么关系？
    http为应用层模块，主要按照特定协议编解码数据；net为传输层模块，主要负责传输编码后的应用层数据；https是个综合模块（涵盖了http/tls/crypto等），主要用于确保数据安全性；

- 问题二：配置项里有一项是证书，这是个干嘛的？照着指引配好证书了，为什么浏览器会报错？
>>> 安全证书是PKI体系的重要一环，主要用于身份校验。本地调试用的证书如果是自己签署的话，浏览器会视为不安全并报错，可以参考 《HTTPS科普扫描帖》。

- 问题三：server本地跑得好好的，怎么部署到云服务器上就访问不了，明明可以ping通，端口也启动了，为什么提示拒绝访问？


### 基础学习
- js语法必须会

js基本语法，都是c语系的，有其他语言背景学习起来相对更简单
常见用法，比如正则，比如数据结构，尤其是数组的几种用法。比如bind/call/apply等等
面向对象写法。js是基于对象的，所以它的oo写起来非常诡异。参见红皮书JavaScript高级编程，很多框架都是自己实现oo基础框架，比如ext-core等。
犀牛书，《JavaScript权威指南》，没事就多翻翻，看少多少遍都不为过。

- 个人学习和技术选型都要循序渐进

先能写，采用面向过程写法，简单理解就是定义一堆function，然后调用，非常简单
然后再追求更好的写法，可以面向对象。对于规模化的编程来说，oo是有它的优势的，一般java、c#，ruby这些语言里都有面向对象，所以后端更习惯，但对于语言经验不那么强的前端来说算高级技巧。
等oo玩腻了，可以有更好的追求：函数式编程，无论编程思维，还是用法上都对已有的编程思维是个挑战。我很喜欢函数式，但不太会在团队里使用，毕竟oo阶段还没完全掌握，风险会比较大。但如果团队水平都非常高了，团队稳定是可以用的。
可以看出我的思路，先能写，然后再追求更好的写法，比如面向对象。等团队水平到一定程度了，并且稳定的时候，可以考虑更加极致的函数式写法。

团队是这样选型的，个人学习也这样，最好是循序渐进，步子迈大了不好。

- 各种高级的JavaScript友好语言

JavaScript友好语言指的是能够使用其他语法实现，但最终编译成js的语言。自从Node.js出现后，这种黑科技层出不穷。比如比较有名的coffee、typescript、babel（es）等。

CoffeeScript虽然也是JavaScript友好语言，但其语法借鉴ruby，崇尚极简，对于类型和OO机制上还是偏弱，而且这么多年也没发展起来，仍然是比较小众的活着。未来比例会越来越少的。

显然TypeScript会越来越好，TypeScript 的强大之处是要用过才知道的。

1）规模化编程，像Java那种，静态类型，面向对象，前端只有TypeScript能做到
2）亲爹是微软安德斯·海尔斯伯格，不知道此人的请看borland传奇去
3）开源，未来很好
4）组合拳：TypeScript + VSCode = 神器
当下前端发展速度极快，以指数级的曲线增长。以前可能1年都不一定有一项新技术，现在可能每个月都有。大前端，Node全栈，架构演进等等都在快速变化。可以说，前端越复杂，有越多的不确定性，TypeScript的机会就越大。

- 再论面向对象

面向对象想用好也不容易的，而且js里有各种实现，真是让人眼花缭乱。

基于原型的写法，纵观JavaScript高级编程，就是翻来覆去的讲这个，这个很基础，但不好是很好用。可以不用，但不可以不会。
自己写面向对象机制是最好的，但不是每个人都有这个能力的。好在es6规范出了更好一点的面向对象，通过class、extends、super关键字来定义类，已经明显好很多了，虽然还很弱，但起码勉强能用起来了。从面向过程走过来的同学，推荐这种写法，简单易用。但要注意面向对象要有面向对象的写法，要理解抽象，继承，封装，多态4个基本特征。如果想用好，你甚至还需要看一些设计模式相关的书。好在有《JavaScript设计模式》一书。Koa2里已经在用这种写法了。
js是脚本语言，解释即可执行。所以它的最大缺点是没有类型系统，这在规模化编程里是非常危险的，一个函数，传参就能玩死人。于是现在流行使用flow和typescript来做类型校验。flow只是工具，比较轻量级。而typescript是es6超级，给es6补充了类型系统和更完善的面向对象机制，所以大部分人都会对ts有好感，很有可能是未来的趋势。
对于es6高级特性，我是比较保守的，一般node长期支持版本lts支持的我都让用，一些更新的特性我一般不让使用。根本lts版本保持一致就好。
